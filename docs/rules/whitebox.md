# 白盒标准

本课程的代码会进行白盒评分，通常会从以下几个方面进行打分：

1. 代码：简洁、注释、空格和命名，以及具体作业的特定其他要求；
2. Git：提交历史、提交说明；
3. Honor Code: 记录同学参考网上的文章或者代码、与同学的交流情况。

通常而言，白盒分数占作业分数的 20%。Honor Code 为必选项。对于Python作业，一半的白盒分数由 pylint 以10分满分直接给出，另一半的白盒分数由助教根据下面的标准评判。pylint 的评分文件见[这里](https://gist.github.com/zeauw/bc2904cf24729da6e354b1e22c8da907)。

对于不符合白盒要求的代码，助教将酌情进行扣分。每个作业的评阅尺度可能不尽相同。

你可以在[issue 551](https://git.tsinghua.edu.cn/physics-data/faq/-/issues/551)查看2025年课程的评分标准，随时更新。若有冲突以issue里的评分方式为准。

## 代码

=== "简洁"

    保证代码的简洁：

    * 有整齐的缩进，建议用空格缩进而非 tab，采用四个空格作为一级缩进；
    * 每一行不要有太多字符，不超过 120 个字符；
    * 减少硬编码和魔法数字（magic number），例如代码中多次出现 3.14 的时候，应该定义 `pi = 3.14`，然后后面都用 `pi` 来指代。

=== "注释"

    在代码中编写适当的注释：

    * 在比较复杂的代码块前，描述代码的功能；
    * 过于简单的代码，一般不写注释；
    * 函数要编写注释，包括其功能，参数和输出；
    * 建议用英文，中文也可以，但是注意要用 UTF-8 编码。

=== "空白"

    代码中应该有适当的空格和空行：

    * 函数中，实现不同功能的代码间需要添加空行；
    * 操作符前后应该有空格，例如 `c = a + b`；
    * 保持前后一致的风格。

=== "命名"

    变量的命名，应该符合一定的规范：

    * 根据语言和类型的不同，固定一种命名规范；
    * 尽量用英文，而不是中文拼音首字母；
    * 命名与上下文要相关；
    * 不用类似 `a, b, c, d` 这种命名方式。

=== "工具"

    为了实现上面的部分要求，可以采用一些自动化工具：

    * 编辑器自带的格式化功能
    * Python 代码：可以用 `autopep8` 和 `black`
    * Bash 代码：可以用 `shfmt`

在部分作业中，助教还可能规定必须用某种方式（包括且不限于算法、语言特性）实现某些特定功能。若不遵守此类要求，即使代码风格良好，也会失去较多的白盒分数。

## Git

=== "提交历史"

    * 每个提交都应该有一定的意义，例如实现了新功能，修复了一个问题，定义了新的函数
    * 比较复杂的程序，要边开发边提交，而不是写完了再一次性提交
    * 不强求线性历史， **不允许使用 force push**

=== "提交说明（commit message）"

    * 简单明了地描述这个提交的内容
    * 建议用英文写，用中文写也可以
    * 不要编写的过于详细或过于简略
    * 可以采用一些格式，例如 [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/#examples)
    * 不掺杂个人情绪
    * 可以添加一些 Emoji。[gitmoji](https://gitmoji.dev/) 为提交说明中使用的 Emoji 提出了一些建议，可以参考。

=== "注意事项"

    * 无特殊原因使用 `git push --force` 将一次扣10分。
    * 不使用 git-lfs 提交大二进制文件（大于等于20M）将一个文件扣3分。（需使用 git lfs 提交大二进制文件）
    * 上述扣分项目封顶为白盒分数扣光。

## Honor Code

同学在实现过程中，如果参考了网上的代码，或者和其他同学（包括助教和没有选课的同学）交流，请把相关的网址、同学姓名和交流内容写到 `HONOR-CODE.md` 文件并提交到仓库中。参考资料标注的具体编写规范可以参考 [Cite when Writing Code](https://integrity.mit.edu/handbook/writing-code)

如：

- 为了实现 XX 功能，我阅读了网页 <https://github.com>，理解了上面的代码，然后重新用我自己的方式实现了一遍。
- 在题目 XX 的 YY 部分，我遇到了 ZZ 问题，参考了 <https://stackoverflow.com/> 上的解决方案。
- 在实现 XX 功能的时候，我 YY 地方没有想清楚如何实现，询问了 ZZ 同学。
- 在题目 XX 里，我和同学 YY 遇到了一些困难，一起讨论以后，最终一致决定要用 ZZ 方法实现。

关于作业中可能涉及的代码雷同、疑似抄袭、学术不端等情况，请 **仔细阅读[学术诚信规则](plagiarism.md)**。
